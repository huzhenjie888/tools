import{d as S,o as v,j as w,q as e,bF as O,v as T,bM as P,ad as q,F as j,r as B,k as t,n as o,bN as I,w as i,m as C,a5 as W,a8 as R,x as D,b0 as G,ab as N,e as H,z as J,C as Q,E as X,ag as Y,s as g,A as Z}from"./index-9f81791e.js";import{_ as ee}from"./InputNumber-1b763fe2.js";import{u as te}from"./copy-ca62dfd9.js";import{_ as ne}from"./Scrollbar-afa78041.js";import{_ as oe}from"./Table-dfdef42c.js";import{_ as ae}from"./Divider-186728fb.js";import{_ as le}from"./FormItem-fd96190c.js";import"./use-locale-d840bf60.js";import"./use-form-item-46895a8e.js";import"./Input-72ef33b2.js";import"./Button-940ace79.js";import"./Remove-49566c12.js";import"./Add-54b1840e.js";const se={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},ue=e("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M12 5v14"}),e("path",{d:"M5 12h14"})],-1),re=[ue],L=S({name:"Plus",render:function(s,r){return v(),w("svg",se,re)}}),ie={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},ce=O('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 7h16"></path><path d="M10 11v6"></path><path d="M14 11v6"></path><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2l1-12"></path><path d="M9 7V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3"></path></g>',1),pe=[ce],E=S({name:"Trash",render:function(s,r){return v(),w("svg",ie,pe)}});function z({data:a}){return a.length===0?0:T.sum(a)/a.length}function _e({data:a}){const s=z({data:a}),r=a.map(c=>(c-s)**2);return z({data:r})}function me({data:a,headerMap:s={}}){if(!Array.isArray(a)||a.length===0)return"";const r=Object.keys(a[0]),c=a.map(_=>Object.values(_)),p=`| ${r.map(_=>s[_]??_).join(" | ")} |`,k=`| ${r.map(()=>"---").join(" | ")} |`,f=c.map(_=>`| ${_.join(" | ")} |`).join(`
`);return`${p}
${k}
${f}`}const de=S({__name:"dynamic-values",props:{values:{}},emits:["update:values"],setup(a,{emit:s}){const r=a,c=P(),p=q(r,"values",s);async function k(){p.value.push(null),await W(),c.value.at(-1)?.focus()}function f(_){if(_===p.value.length-1){k();return}c.value.at(_+1)?.focus()}return(_,A)=>{const l=R,n=D,m=G;return v(),w("div",null,[(v(!0),w(j,null,B(o(p),(b,d)=>(v(),w("div",{key:d,"mb-2":"",flex:"","flex-nowrap":"","gap-2":""},[t(o(ee),{ref_for:!0,ref:o(c).set,value:o(p)[d],"onUpdate:value":$=>o(p)[d]=$,"show-button":!1,placeholder:"Set your measure...",autofocus:"",onKeydown:I($=>f(d),["enter"])},null,8,["value","onUpdate:value","onKeydown"]),t(m,null,{trigger:i(()=>[t(n,{circle:"",variant:"text",onClick:$=>o(p).splice(d,1)},{default:i(()=>[t(l,{component:o(E),depth:"3",size:"18"},null,8,["component"])]),_:2},1032,["onClick"])]),default:i(()=>[C(" Delete value ")]),_:2},1024)]))),128)),t(n,{onClick:k},{default:i(()=>[t(l,{component:o(L),depth:"3","mr-2":"",size:"18"},null,8,["component"]),C(" Add a measure ")]),_:1})])}}}),fe={"mb-5":"",flex:"","flex-1":"","flex-nowrap":"","justify-center":"","gap-12px":""},ve={flex:"","justify-center":""},he={style:{flex:"0 0 100%"}},ge={style:{"max-width":"600px",margin:"0 auto"}},we={"mx-auto":"","max-w-sm":"",flex:"","justify-center":"","gap-3":""},ke={"mt-5":"",flex:"","justify-center":"","gap-3":""},Ne=S({__name:"benchmark-builder",setup(a){const s=N("benchmark-builder:suites",[{title:"Suite 1",data:[5,10]},{title:"Suite 2",data:[8,12]}]),r=N("benchmark-builder:unit",""),c=l=>Math.round(l*1e3)/1e3,p=H(()=>s.value.map(({data:l,title:n})=>{const m=l.filter(T.isNumber);return{title:n,size:m.length,mean:z({data:m}),variance:_e({data:m})}}).sort((l,n)=>l.mean-n.mean).map(({mean:l,variance:n,size:m,title:b},d,$)=>{const x=r.value.trim(),h=$[0].mean,V=l-h,U=h===0?"∞":c(l/h),u=d!==0&&h!==l?` (+${c(V)}${x} ; x${U})`:"";return{position:d+1,title:b,mean:`${c(l)}${x}${u}`,variance:`${c(n)}${x}${x?"²":""}`,size:m}})),{copy:k}=te({createToast:!1}),f={title:"Suite",size:"Samples",mean:"Mean",variance:"Variance",position:"Position"};function _(){k(me({data:p.value,headerMap:f}))}function A(){const l=p.value.flatMap(({title:n,...m})=>[` - ${n}`,...Object.entries(m).map(([b,d])=>`    - ${f[b]??b}: ${d}`)]).join(`
`);k(l)}return(l,n)=>{const m=Q,b=ae,d=le,$=Z,x=R,h=D,V=ne,U=oe;return v(),w(j,null,[t(V,{style:{flex:"1"},"x-scrollable":""},{default:i(()=>[e("div",fe,[(v(!0),w(j,null,B(o(s),(u,M)=>(v(),w("div",{key:M},[t($,{style:{width:"294px"}},{default:i(()=>[t(m,{value:u.title,"onUpdate:value":y=>u.title=y,"label-position":"left",label:"Suite name",placeholder:"Suite name...",clearable:""},null,8,["value","onUpdate:value"]),t(b),t(d,{label:"Suite values","show-feedback":!1},{default:i(()=>[t(de,{values:u.data,"onUpdate:values":y=>u.data=y},null,8,["values","onUpdate:values"])]),_:2},1024)]),_:2},1024),e("div",ve,[o(s).length>1?(v(),X(h,{key:0,variant:"text",onClick:y=>o(s).splice(M,1)},{default:i(()=>[t(x,{component:o(E),depth:"3","mr-2":"",size:"18"},null,8,["component"]),C(" Delete suite ")]),_:2},1032,["onClick"])):Y("",!0),t(h,{variant:"text",onClick:y=>o(s).splice(M+1,0,{data:[0],title:`Suite ${o(s).length+1}`})},{default:i(()=>[t(x,{component:o(L),depth:"3","mr-2":"",size:"18"},null,8,["component"]),C(" Add suite ")]),_:2},1032,["onClick"])])]))),128))])]),_:1}),e("div",he,[e("div",ge,[e("div",we,[t(m,{value:o(r),"onUpdate:value":n[0]||(n[0]=u=>J(r)?r.value=u:null),placeholder:"Unit (eg: ms)",label:"Unit","label-position":"left","mb-4":""},null,8,["value"]),t(h,{onClick:n[1]||(n[1]=u=>s.value=[{title:"Suite 1",data:[]},{title:"Suite 2",data:[]}])},{default:i(()=>[C(" Reset suites ")]),_:1})]),t(U,null,{default:i(()=>[e("thead",null,[e("tr",null,[e("th",null,g(f.position),1),e("th",null,g(f.title),1),e("th",null,g(f.size),1),e("th",null,g(f.mean),1),e("th",null,g(f.variance),1)])]),e("tbody",null,[(v(!0),w(j,null,B(o(p),({title:u,size:M,mean:y,variance:F,position:K})=>(v(),w("tr",{key:u},[e("td",null,g(K),1),e("td",null,g(u),1),e("td",null,g(M),1),e("td",null,g(y),1),e("td",null,g(F),1)]))),128))])]),_:1}),e("div",ke,[t(h,{onClick:n[2]||(n[2]=u=>_())},{default:i(()=>[C(" Copy as markdown table ")]),_:1}),t(h,{onClick:n[3]||(n[3]=u=>A())},{default:i(()=>[C(" Copy as bullet list ")]),_:1})])])])],64)}}});export{Ne as default};
