import{_ as A}from"./FormatTransformer.vue_vue_type_script_setup_true_lang-02d988c3.js";import{bz as k,bK as O,d as I,ab as T,j as $,q as j,k as y,w as F,F as R,o as Y,n as X,z as L}from"./index-9f81791e.js";import{w as z}from"./defaults-4d6daddf.js";import{_ as B}from"./FormItem-fd96190c.js";import{_ as U}from"./Switch-820757ae.js";import{_ as V}from"./InputNumber-1b763fe2.js";import"./TextareaCopyable-1ecafa3c.js";import"./copy-ca62dfd9.js";import"./Copy-8393bb39.js";import"./Scrollbar-afa78041.js";import"./use-form-item-46895a8e.js";import"./use-locale-d840bf60.js";import"./Input-72ef33b2.js";import"./Button-940ace79.js";import"./Remove-49566c12.js";import"./Add-54b1840e.js";var P={exports:{}},M={exports:{}};(function(d,c){Object.defineProperty(c,"__esModule",{value:!0}),c.ParsingError=void 0;class m extends Error{constructor(o,i){super(o),this.cause=i}}c.ParsingError=m;let r;function g(){return b(!1)||S()||_()||E()}function x(){return e(/\s*/),b(!0)||_()||C()||w(!1)}function a(){const n=w(!0),o=[];let i,u=x();for(;u;){if(u.node.type==="Element"){if(i)throw new Error("Found multiple root nodes");i=u.node}u.excluded||o.push(u.node),u=x()}if(!i)throw new m("Failed to parse XML","Root Element not found");if(r.xml.length!==0)throw new m("Failed to parse XML","Not Well-Formed XML");return{declaration:n?n.node:null,root:i,children:o}}function w(n){const o=e(n?/^<\?(xml)\s*/:/^<\?([\w-:.]+)\s*/);if(!o)return;const i={name:o[1],type:"ProcessingInstruction",attributes:{}};for(;!(l()||s("?>"));){const u=v();if(u)i.attributes[u.name]=u.value;else return}return e(/\?>/),{excluded:n?!1:r.options.filter(i)===!1,node:i}}function b(n){const o=e(/^<([^?!</>\s]+)\s*/);if(!o)return;const i={type:"Element",name:o[1],attributes:{},children:[]},u=n?!1:r.options.filter(i)===!1;for(;!(l()||s(">")||s("?>")||s("/>"));){const h=v();if(h)i.attributes[h.name]=h.value;else return}if(e(/^\s*\/>/))return i.children=null,{excluded:u,node:i};e(/\??>/);let f=g();for(;f;)f.excluded||i.children.push(f.node),f=g();if(r.options.strictMode){const h=`</${i.name}>`;if(r.xml.startsWith(h))r.xml=r.xml.slice(h.length);else throw new m("Failed to parse XML",`Closing tag not matching "${h}"`)}else e(/^<\/\s*[\w-:.\u00C0-\u00FF]+>/);return{excluded:u,node:i}}function C(){const n=e(/^<!DOCTYPE\s+\S+\s+SYSTEM[^>]*>/)||e(/^<!DOCTYPE\s+\S+\s+PUBLIC[^>]*>/)||e(/^<!DOCTYPE\s+\S+\s*\[[^\]]*]>/)||e(/^<!DOCTYPE\s+\S+\s*>/);if(n){const o={type:"DocumentType",content:n[0]};return{excluded:r.options.filter(o)===!1,node:o}}}function E(){if(r.xml.startsWith("<![CDATA[")){const n=r.xml.indexOf("]]>");if(n>-1){const o=n+3,i={type:"CDATA",content:r.xml.substring(0,o)};return r.xml=r.xml.slice(o),{excluded:r.options.filter(i)===!1,node:i}}}}function _(){const n=e(/^<!--[\s\S]*?-->/);if(n){const o={type:"Comment",content:n[0]};return{excluded:r.options.filter(o)===!1,node:o}}}function S(){const n=e(/^([^<]+)/);if(n){const o={type:"Text",content:n[1]};return{excluded:r.options.filter(o)===!1,node:o}}}function v(){const n=e(/([^=]+)\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)\s*/);if(n)return{name:n[1].trim(),value:t(n[2].trim())}}function t(n){return n.replace(/^['"]|['"]$/g,"")}function e(n){const o=r.xml.match(n);if(o)return r.xml=r.xml.slice(o[0].length),o}function l(){return r.xml.length===0}function s(n){return r.xml.indexOf(n)===0}function p(n,o={}){n=n.trim();const i=o.filter||(()=>!0);return r={xml:n,options:Object.assign(Object.assign({},o),{filter:i,strictMode:o.strictMode===!0})},a()}d.exports=p,c.default=p})(M,M.exports);var W=M.exports;(function(d,c){var m=O&&O.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(c,"__esModule",{value:!0});const r=m(W);function g(t){if(!t.options.indentation&&!t.options.lineSeparator)return;t.content+=t.options.lineSeparator;let e;for(e=0;e<t.level;e++)t.content+=t.options.indentation}function x(t){t.content=t.content.replace(/ +$/,"");let e;for(e=0;e<t.level;e++)t.content+=t.options.indentation}function a(t,e){t.content+=e}function w(t,e,l){if(typeof t.content=="string")b(t.content,e,l);else if(t.type==="Element")E(t,e,l);else if(t.type==="ProcessingInstruction")S(t,e);else throw new Error("Unknown node type: "+t.type)}function b(t,e,l){if(!l){const s=t.trim();(e.options.lineSeparator||s.length===0)&&(t=s)}t.length>0&&(!l&&e.content.length>0&&g(e),a(e,t))}function C(t,e){const l="/"+t.join("/"),s=t[t.length-1];return e.includes(s)||e.includes(l)}function E(t,e,l){if(e.path.push(t.name),!l&&e.content.length>0&&g(e),a(e,"<"+t.name),_(e,t.attributes),t.children===null||e.options.forceSelfClosingEmptyTag&&t.children.length===0){const s=e.options.whiteSpaceAtEndOfSelfclosingTag?" />":"/>";a(e,s)}else if(t.children.length===0)a(e,"></"+t.name+">");else{const s=t.children;a(e,">"),e.level++;let p=t.attributes["xml:space"]==="preserve",n=!1;if(!p&&e.options.ignoredPaths&&(n=C(e.path,e.options.ignoredPaths),p=n),!p&&e.options.collapseContent){let o=!1,i=!1,u=!1;s.forEach(function(f,h){f.type==="Text"?(f.content.includes(`
`)?(i=!0,f.content=f.content.trim()):(h===0||h===s.length-1)&&f.content.trim().length===0&&(f.content=""),f.content.trim().length>0&&(o=!0)):f.type==="CDATA"?o=!0:u=!0}),o&&(!u||!i)&&(p=!0)}s.forEach(function(o){w(o,e,l||p)}),e.level--,!l&&!p&&g(e),n&&x(e),a(e,"</"+t.name+">")}e.path.pop()}function _(t,e){Object.keys(e).forEach(function(l){const s=e[l].replace(/"/g,"&quot;");a(t," "+l+'="'+s+'"')})}function S(t,e){e.content.length>0&&g(e),a(e,"<?"+t.name),_(e,t.attributes),a(e,"?>")}function v(t,e={}){e.indentation="indentation"in e?e.indentation:"    ",e.collapseContent=e.collapseContent===!0,e.lineSeparator="lineSeparator"in e?e.lineSeparator:`\r
`,e.whiteSpaceAtEndOfSelfclosingTag=e.whiteSpaceAtEndOfSelfclosingTag===!0,e.throwOnFailure=e.throwOnFailure!==!1;try{const l=(0,r.default)(t,{filter:e.filter,strictMode:e.strictMode}),s={content:"",level:0,options:e,path:[]};return l.declaration&&S(l.declaration,s),l.children.forEach(function(p){w(p,s,!1)}),e.lineSeparator?s.content.replace(/\r\n/g,`
`).replace(/\n/g,e.lineSeparator):s.content}catch(l){if(e.throwOnFailure)throw l;return t}}v.minify=(t,e={})=>v(t,Object.assign(Object.assign({},e),{indentation:"",lineSeparator:""})),d.exports=v,c.default=v})(P,P.exports);var q=P.exports;const D=k(q);function N(d){return d.trim()}function G(d,c){return z(()=>D(N(d),c)??"","")}function K(d){const c=N(d);if(c==="")return!0;try{return D(c),!0}catch{return!1}}const Q={"important:flex-full":"","important:flex-shrink-0":"","important:flex-grow-0":""},H={flex:"","justify-center":""},J="<hello><world>foo</world><world>bar</world></hello>",he=I({__name:"xml-formatter",setup(d){const c=T("xml-formatter:indent-size",2),m=T("xml-formatter:collapse-content",!0);function r(x){return G(x,{indentation:" ".repeat(c.value),collapseContent:m.value,lineSeparator:`
`})}const g=[{validator:K,message:"Provided XML is not valid."}];return(x,a)=>{const w=U,b=B,C=V,E=A;return Y(),$(R,null,[j("div",Q,[j("div",H,[y(b,{label:"Collapse content:","label-placement":"left"},{default:F(()=>[y(w,{value:X(m),"onUpdate:value":a[0]||(a[0]=_=>L(m)?m.value=_:null)},null,8,["value"])]),_:1}),y(b,{label:"Indent size:","label-placement":"left","label-width":"100","show-feedback":!1},{default:F(()=>[y(C,{value:X(c),"onUpdate:value":a[1]||(a[1]=_=>L(c)?c.value=_:null),min:"0",max:"10","w-100px":""},null,8,["value"])]),_:1})])]),y(E,{"input-label":"Your XML","input-placeholder":"Paste your XML here...","output-label":"Formatted XML from your XML","output-language":"xml","input-validation-rules":g,transformer:r,"input-default":J})],64)}}});export{he as default};
